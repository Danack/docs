<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Solid structure</title>

        <meta name="description" content="Danack talking about interface segregation">
        <meta name="author" content="Dan Ackroyd">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link rel="stylesheet" href="css/reveal.css">
        <!-- link rel="stylesheet" href="css/theme/black.css" id="theme" -->
        <link rel="stylesheet" href="css/theme/whiteDanack.css" id="themecss">
        <!-- <link rel="stylesheet" href="lib/css/vsdanack.css" id="codeststylecss"> -->
        <link rel="stylesheet" href="lib/css/zenburn_backup.css" id="codeststylecss">
      
        <style type="text/css">
        /* overrides */
        

        body {
            background: #a8fcfc;
            /* background: -moz-radial-gradient(center, circle cover, #ffffff 0%, #1f1f1f 100%);
            background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%, #555a5f), color-stop(100%, #1f1f1f));*/
            background: -webkit-radial-gradient(center, circle cover, #f2f3ff 45%, rgba(36, 133, 245, 0.21) 75%);
          
          
            /* background: -o-radial-gradient(center, circle cover, #ffffff 0%, #efefef 100%);
            background: -ms-radial-gradient(center, circle cover, #ffffff 0%, #efefef 100%); */
            /* background: radial-gradient(center, circle cover, #ffffff 0%, #7f7f7f 100%); */
            /*background-color: #fdfdfd; */
        }
        .reveal section img {
            border: 0;
            background: none;
            box-shadow: 0 0 #000;
        }
        .reveal pre {
            width: 99%;
            font-size: 0.68em;
            margin-left: 0px;
            margin-right: auto;
            padding-left: 20px;
            padding-right: 20px;
            padding-top: 20px;
            padding-bottom: 20px;
          
            /* box-shadow: 0px 0px 24px rgba(0, 0, 0, 0.7); */
        }
        
        /* 
        .reveal pre {
          box-shadow: 0px 0px 6px rgba(0, 0, 0, 0.3);
        }
        
        */
        
        .preformatted {
          font-family: monospace;
          white-space: pre;
      }

        .spaceTop {
            margin-top: 50px !important;
        }
        .spaceBottom {
            margin-bottom: 50px !important;
        }

        h2, p, section { text-align: left; }
        .reveal .slides {text-align: left; }
        
        
        h1, h2, h3, h4, h5 {
            font-family: "Quicksand", sans-serif !important;
            font-weight: 200 !important;
            /*text-transform: uppercase; */
        }
            
        .embiggen { 
            font-size: 1.2em !important;  
        }
        .emlargen {
            font-size: 1.05em !important;
        }
        
        .emnormal {
          font-size: 0.9em !important;
        }
        
        .emsmallen { 
            font-size: 0.8em !important;  
        }
        .em_075 {
          font-size: 0.75em !important;
        }
        .em_08 {
          font-size: 0.8em !important;
        }
        .em_085 {
          font-size: 0.9em !important;
        }
        .em_09 {
          font-size: 0.9em !important;
        }
        .em_095 {
          font-size: 0.95em !important;
        }
        .em1 {
          font-size: 1.0em !important;  
        }
        .em1_1 {
          font-size: 1.1em !important;  
        }
        
        .em1_05 {
          font-size: 1.05em !important;  
        }
        .em1_1 {
          font-size: 1.1em !important;  
        }
        .em1_5 {
          font-size: 1.5em !important;  
        }
        .em1_2 {
          font-size: 1.2em !important;  
        }
        .em1_3 {
          font-size: 1.3em !important;  
        }
        .em1_4 {
          font-size: 1.4em !important;  
        }
        
        .em1_6 {
          font-size: 1.6em !important;  
        }
        .em1_8 {
          font-size: 1.8em !important;  
        }
        
        
        .em2 {
          font-size: 2em !important;  
        }
        
        .em2_4 {
          font-size: 2.4em !important;  
        }
        .em3 {
          font-size: 3em !important;  
        }
        th {
          font-size: 1.5em !important;
        }
        
        .finale {
            font-size: 148px !important; 
            text-align: center !important;
            /* margin-bottom: 148px !important; */
        }
        .speaker-controls-notes > ul, 
        .speaker-controls-notes ul, 
        .notes > ul,
        .notes  ul{
          margin-top: 0px;
          margin-bottom: 0px;
        }
        
        .centre {
            text-align: center !important;
        }
        
        .subtle {
            color: #7c7c7c;
        }
        
        .smallText {
            font-size: 24px !important;
        }
        
        blockquote {
            background-color: #f5f5f5;
        }
        
        blockquote {
            width: 90% !important;
            font-size: 36px !important;
        }
            
        pre, .danackCode {
            font-size: 26px;
        }

        .rotate {
            /* Safari */
            -webkit-transform: rotate(-90deg);
            
            /* Firefox */
            -moz-transform: rotate(-90deg);
            
            /* IE */
            -ms-transform: rotate(-90deg);
            
            /* Opera */
            -o-transform: rotate(-90deg);
            
            /* Internet Explorer */
            filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
        }
        
        </style>

        <!-- Printing and PDF exports -->
        <!-- <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script> -->
        <script src="./plugin/jquery/jquery.min.js"></script>
    </head>

    <body>
      <div class="reveal">
        <div class="slides">

<!-- *************************** -->
<section class="em1_4">
    <h1>Solid structure</h1>
    <h3>Building decoupled applications with an injector.</h3>
    <p>
        <a href="http://twitter.com/MrDanack">@MrDanack</a>
    </p>
    <p class="subtle" style="padding-top: 100px">
      <small>Press 'c' to toggle code style</small><br/>
      <small>Press 's' for speaker notes</small>
    </p>
    <p>
      <a href="https://joind.in/talk/04aa0">https://joind.in/talk/04aa0</a>
    </p>
</section>
          
          



          
          

<!-- *************************** -->
<section class="em1_4">
    <h1>Apologies in advance</h1>

    <ul>
      <li>I normally try to make talks start off easy, before reaching the difficult stuff.</li>
      <li>I think I may have failed. </li>
      <li>
        J.B. Rainsberger - Integrated Tests Are A Scam <br/>
        <a href="https://vimeo.com/80533536">https://vimeo.com/80533536</a>
      </li>
    </ul>

    <aside class="notes">
      <p>
        If I completely lose you right from the start, apologies that is my fault. When I was doing a run through yesterday I realised that there's a good chance that the beginning might be a bit confusing, which would make the rest of the talk really hard to follow.
      </p>
      
      <p>
        The ideas in this talk may be easier to understand after watching this talk about integrated tests.
      </p>
      <p>
      </p>
      
    </aside>
</section>


          
<!-- *************************** -->
<section class="em1_5">
  <h1>We'll totally get onto Solid structure....</h1>
  <p>
    ....but first something a bit different.
  </p>
    <aside class="notes">
    <ul>
      <li>
        
      </li>
    </ul>
  </aside>
</section>


<!-- *************************** -->
<section class="em1_4">
    <h1>The true nature of reality</h1>
    <h3>Understanding the most fundamental parts of programming.</h3>
    <p>
        <a href="http://twitter.com/MrDanack">@MrDanack</a>
    </p>
  
      <aside class="notes">
    <p>
      Who here has studied any quantum physics?
    </p>
  </aside>
</section>



<!-- *************************** -->
<section class="em1_4">
    <h2>So my education background is physics/chemistry</h2>
    
    <ul>
      <li class="fragment">Solids, liquids, gases</li>
      <li class="fragment">Molecules and atoms</li>
      <li class="fragment">Fundamental particles, quarks and leptons</li>
      <li class="fragment">Fundamental forces, gravitational, electromagnetic, strong nuclear, and weak nuclear</li>
    </ul>

  
      <aside class="notes">
    <p>
      Who here has studied any quantum physics?
    </p>
        
     <p>
       While I was sitting in the lecture hall at 9am at the start of a 2 hour lecture about quantum physics, I realised two things:
     </p>

     <p>One - whoever scheduled a 2 hour quantum physics lecture for Monday morning is an asshole.</p>
     <p>Two - most of the time, thinking about stuff at a really low level isn't actually that useful. Instead thinking at higher levels of abstraction </p>
     <p>
       This shit is a bit hard - perhaps I'll go off and make video games for a living.
     </p>
        
  </aside>
  
</section>


<section class="em1_4">
    <h2>Normal ways of thinking about code</h2>
  <table width="100%">
    <tr>
      <td align="right">
        Procedural
      </td>
      <td align="center">
        vs
      </td>
      <td>
        Object oriented
      </td>
    </tr>

    <tr>
      <td align="right">
        Declarative
      </td>
      <td align="center">
        vs
      </td>
      <td>
        Imperative
      </td>
    </tr>

    <tr>
      <td align="right">
        Functional
      </td>
      <td align="center">
        vs
      </td>
      <td>
        Stateful
      </td>
    </tr>
</table>

</section>



<!-- *************************** -->
<section class="em1_5">
  <h1 class="finale">Those aren't the fundamental aspects of programming</h1>
</section>





<section class="em1_4">
    <h2>Fundamental programming forces</h2>
  <table width="100%">
    <tr class="fragment">
      <td align="right">
        Can be unit tested
      </td>
      <td align="center">
        vs
      </td>
      <td>
        Can't be unit tested
      </td>
    </tr>
    <tr class="fragment">
      <td align="right">
        Semantically meaningful types
      </td>
      <td align="center">
        vs
      </td>
      <td>
        Basic types e.g. strings, ints
      </td>
    </tr>
</table>
  
    <aside class="notes">
      <p>
      By unit testsd, I really mean tested in isolation.
      </p>
      <p>
        This talk is mostly about the difference between unit-testable code and code that can't be tested, but the difference between typed code and 'untyped' code is also important.        
      </p>
  </aside>

</section>




<!-- *************************** -->
<section>
  <img src="/images/SolidStructure_1.png" width="1200px" />
  <aside class="notes">
    
    <p>
      So this is a representation of an application that does some stuff like send notifications to Twitter.
    </p>
      
    <p>
      You have a bootstrap layer, that calls some controller code, that calls some services, which then calls either a database, or some API on another
    </p>
    <p>On the left we have the bootstrap and then index.php</p>
    <p>In the middle we have the actual application code, </p>
    <p>On the right hand side we have code that calls services </p>
  </aside>

</section>



<!-- *************************** -->
<section>
    <h1>Left - bootstrap layer</h1>
  
    <pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
function getTwitterApiKey()
{
    return getenv('twitter_api_key');
}
</code>
</pre>

<pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
// Hard-coded to specific class.
// and so not testable
$app = new App(); 
</code>
</pre>
  
  <aside class="notes">
  </aside>
</section>



<!-- *************************** -->
<section>
    <h1>Your lovely app code</h1>
  

<p>
  
</p>
  
  <aside class="notes">
  </aside>
</section>

<!-- *************************** -->
<section>
    <h1>Right - can't be unit tested</h1>
  
  <p>
    Anything that talks to a:
  </p>
<ul>
  <li>DB</li>
  <li>External api</li>
  <li>File system</li>
  
  Can't be unit-tested
  
</ul>
  
  <aside class="notes">
  </aside>
</section>


<!-- *************************** -->
<section>
    <h1>Right side - is typeless</h1>

<pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
function sendMessageToUser(
    TwitterAPI $twitterApi,
    Message $message,
    User $user
) {
    $message = "@".$user->getName()." ".$message->getText()
    $twitterApi->sendMessage($message);
}
  
class TwitterAPI
{
    function sendMessage(string $text);
    ...
}
  
</code>
</pre>
  
  <aside class="notes">
    <p>
      You really want to use strong, semantically meaningful types across as much of your application as possible.
    </p>
    <p>
      Pushing semantically weak types to 
    </p>
  </aside>
</section>




<!-- *************************** -->
<section>
  <img src="/images/SolidStructure_2.png" width="1200px" />

  <aside class="notes">
    <p>
      On the left, the bootstrap layer is completely untestable.
    </p>
    <p>
      In the middle you have your lovely appliation code, which you can write unit tests for until you reach 100% coverage.
    </p>
    <p>
      On the right you have
      
    </p>
  </aside>

</section>





<!-- *************************** -->
<section>
  <h1>Having two different modes is a problem</h1>
  <ul>
    <li>
      Unstructured - testable + un-testable code gets mixed up, leading to a messy application
    </li>
  </ul>
  
  <aside class="notes">
    <p>At the edge of our application we have a Message </p>

  </aside>

</section>






<!-- *************************** -->
<section>
  <h1>Dependency injection to the rescue</h1>

  <p>
    Auryn is an auto-wiring recursive dependency injector.
  </p>

  <p>
    https://github.com/rdlowrey/auryn
  </p>
  
  
  <aside class="notes">
    <p>Scary term - 
    </p>
  </aside>

</section>



<!-- *************************** -->
<section>
    <h1>It runs code for you</h1>
  
    <pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
function foo()
{
  echo 'Hello world';
}
      
$injector->execute('foo');
// Output is 'Hello world'

</code>
</pre>
</section>



<!-- *************************** -->
<section>
    <h2>Auto-wiring means it looks at param types</h2>
    <pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
function foo(User $user)
{
  echo 'Hello ' . $user->getName();
}

$user = new User("MrDanack");
      
$injector->share($user);
$injector->execute('foo');
// Output is 'Hello world'
</code>
</pre>
  <p>
    I <3 types. And you should too. 
  </p>
  
  <aside class="notes">
  
    <p>
      The biggest problem with other DI libraries is that they use service name rather than types.
    </p>
    <p>
      This makes setting up the config be a complete nightmare.
    </p>
    <p>
      I wish I'd saved it - there was a bug reported to bugs.php.net where someone had a 15,000 line config file for their Symfony app.
    </p>
    <p>
      And they were wondering why their app was being a bit slow.
    </p>
    
  </aside>
</section>





<!-- *************************** -->
<section>
  <h1>Aliasing interfaces to classes</h1>

<pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
class StubFileWriter implements FileWriter {
    function write(string $string) {  ... } 
}
  
function logUserAccess(User $user, FileWriter $fw)
{
    $fw->write( "User " . $user->getName() . " did something");
}
$user = new User("MrDanack");
$injector->share($user);
$injector->alias('FileWriter', 'StubFileWriter');
$injector->execute('foo');
</code>
</pre>
  
  <aside class="notes">
    <p></p>
  </aside>
  
</section>




<!-- *************************** -->
<section>
    <h2>Defining raw params</h2>
    <pre class="danackCode spaceTop em_09" data-trim><code class="php" data-trim>
$s3Params = array(
    ':aws_key'    => 'abcde12345',
    ':aws_secret' => 'fghij67890'
    ':region'     => 'EU_WEST'
);
      
$injector->define('S3Config', $s3Params);

class S3Config {
    function __construct(
        $aws_key,
        $aws_secret,
        $region,
    ) { ... }
}
      
$injector->make(S3Config::class);

</code>
</pre>

  <aside class="notes">
    <p>
      This defines the parameters by name.
    </p>
  </aside>
</section>


<!-- *************************** -->
<section>
    <h1>So far, so 'meh'</h1>
  
    <p>
      Most DICs can do that sort of thing.
    </p>
  <p>
    
  </p>

  <aside class="notes">
  </aside>
</section>






<!-- *************************** -->
<section>
    <h1>Delegation is awesome</h1>
  
    <pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>

function createTwitterApiConfig()
{
    return new TwitterApiConfig(
      getenv('twitter_api_key'),
      getenv('twitter_timout'),
    );
}

    return new S3Config($key, $secret, $region)
}

$injector->delegate('S3Config', 'createS3Config');
</code>
</pre>

  <aside class="notes">
    <p>
      This defines the parameters by name.
    </p>
  </aside>
</section>



    
    
    
    

<!-- *************************** -->
<section>
  <h1>End result of using DI</h1>

  <ul>
    <li>
       Testable + typed code, can be written cleanly.
    </li>
    <li>
      Non-testable + untyped code, completely separated away.
    </li>
    <li>
       Injector provides the binding between these two different regions.
    </li>
  </ul>
  
  <aside class="notes">
    <p>I have been using this pattern for a couple of years....I thought it was going to be really easy to explain how awesome it is.</p>
    <p>
      
      
    </p>
  </aside>
  
</section>




<!-- *************************** -->
<section>
  <h1>Limitations of using an injector</h1>

  <p>
    There's two problems that don't occur in 'normal' programming, when using an injector:
  </p>
  
  <ul>
    <li>
       More than one of a type.
    </li>
    <li>
       Unknowable dependencies.
    </li>
    
  </ul>
  
  <aside class="notes">
    <p>I have been using this pattern for a couple of years....I thought it was going to be really easy to explain how awesome it is.</p>
  </aside>
  
</section>



<!-- *************************** -->
<section>
  <h1>Context objects</h1>
    <pre class="danackCode spaceTop em1_4" data-trim><code class="php" data-trim>

class ArchiveContext {
    public $current;
    public $archive;
}

  </code>
</pre>

  
  <p>
    http://accu.org/index.php/journals/246
  </p>
  
  <aside class="notes">
    <p>"The ability to bind the lifecycle and interactions of stateful components to well-defined but extensible lifecycle contexts."</p>
  
  </aside>
  
</section>



<!-- *************************** -->
<section>
  <h1>More than one of a type</h1>
    <pre class="danackCode spaceTop em1_4" data-trim><code class="php" data-trim>
// Move data that is more than 24 months old to archive
function ArchiveData(PDO $liveDB, PDO $archiveDB) 
{
    
}

  </code>
</pre>

  <p>
    Injector can't tell the two parameters apart.
    
  </p>

  
  <aside class="notes">
    <p>"The ability to bind the lifecycle and interactions of stateful components to well-defined but extensible lifecycle contexts."</p>
  
  </aside>
  
</section>


          



<!-- *************************** -->
<section>
    <pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
function createArchiveContext(DataStorageFactory $dsFactory) {
    return new ArchiveContext(
        $dsFactory->create('current');
        $dsFactory->create('archive');
    );
}

$injector->delegate('ArchiveContext', 'createArchiveContext');

// Want to move data from current to archive
function archiveData(ArchiveContext $archiveContext)
{
   $current = $archiveContext->current;
   $archive = $archiveContext->archive;
   ...
}

</code>
</pre>

  <aside class="notes">
  </aside>
  
</section>


<!-- *************************** -->
<section>
  <h1>Sometimes can't know dependencies</h1>
    <pre class="danackCode spaceTop em1_4" data-trim><code class="php" data-trim>

function sendMessage(UserPrefs $userPrefs, ...) 
{
    $service = $userPrefs->getMessageService();
    if ($service == 'twitter') {
        // Need a twitter Api
    }
    if ($service == 'pager_duty') {
        // Need a pager duty Api
    }
}

  </code>
</pre>

  <aside class="notes">
    <p></p>
  <p>
     This seems to be a problem that Symfony, Zend frameworks just don't want to recognise.
  </p>
  <p>
    I'm not entirely sure why, but I suspect it's just that they don't want people to know that there are limitations to those frameworks.
  </p> 
  <p>
    Symfony does abuse event handlers to solve this problem....some apps have 1600 event listeners registered, just in case they are needed.
  </p>

  
  </aside>
  
</section>


<!-- *************************** -->
<section>
  <h1>Sometimes can't know dependencies</h1>
    <pre class="danackCode spaceTop em1_4" data-trim><code class="php" data-trim>

function sendTwitterMessage(TwitterApi $twitterApi) {
   ...
}
      
function sendPagerDutyMessage(PageDuty $pagerDuty) {
      
}
      
function sendMessage(UserPrefs $userPrefs) 
{
    $service = $userPrefs->getMessageService();
    if ($service == 'twitter') {
        return new Exec('sendTwitterMessage');
    }
    if ($service == 'pager_duty') {
        return new Exec('sendPagerDutyMessage');
    }
}

  </code>
</pre>

  <aside class="notes">
    <p></p>
  <p>
     This seems to be a problem that Symfony, Zend frameworks just don't want to recognise.
  </p>
  <p>
    I'm not entirely sure why, but I suspect it's just that they don't want people to know that there are limitations to those frameworks.
  </p> 
  

  
  </aside>
  
</section>


<!-- *************************** -->
<section class="em1_5">
  <h1 class="finale">Fin</h1>
  <div style="min-height: 100px">&nbsp;</div>
  <ul>
    <li>Use interfaces/classes with only the required methods</li>
  </ul>
</section>


<!-- *************************** -->
<section style="width: 100%; text-align: center !important;">
    <img src="/images/true_neutral.jpg" />
</section>


<!-- *************************** -->
<section>
    <h1>Delegation is awesome</h1>
  
    <pre class="danackCode spaceTop em1" data-trim><code class="php" data-trim>
    
$shares = [
    'Amp\Reactor',
    'ASM\Session',
];
$aliases = [
    'ArtaxServiceBuilder\ResponseCache' => 'ArtaxServiceBuilder\ResponseCache\NullResponseCache',
    'Room11\HTTP\VariableMap' => 'Room11\HTTP\VariableMap\PSR7VariableMap',
];


// Delegate the creation of types to callables.
$delegates = [
    'ASM\Session' => 'Blog\App::createSession',
    'ASM\File\FileDriver' => 'Blog\App::createASMFileDriver',
    'Amp\Reactor' => 'Amp\getReactor',
];

$params = [ ];

$defines = [
    'FileFilter\YuiCompressorPath' => ["/usr/lib/yuicompressor.jar"],
];

$prepares = [
    'Jig\Jig' => 'Blog\App::prepareJig'
];

$injectionParams = new InjectionParams(
    $shares,
    $aliases,
    $delegates,
    $params,
    $prepares,
    $defines
);

</code>
</pre>

  <aside class="notes">
    <p>
      This defines the parameters by name.
    </p>
  </aside>
</section>


<!-- *************************** -->
<section class="em1_5">
  <h1 class="finale">Simplicity Is Hard</h1>
    <aside class="notes">
    <ul>
      <li>
        Is the ArrayVariableMap class clever? Nope.
      </li>

    </ul>
  </aside>
</section>



<!-- *************************** -->
<section>
    <pre class="danackCode spaceTop em1_4" data-trim><code class="php" data-trim>


</code>
</pre>

  <aside class="notes">
  </aside>
  
</section>

<!-- *************************** -->
<section>
    <p>
      Solid structure
    </p>
  <ul>
    <li>
    </li>
  </ul>
</section>





<!-- *************************** -->
<section>
    <blockquote cite="http://searchservervirtualization.techtarget.com/definition/Our-Favorite-Technology-Quotations">
        &ldquo;For years there has been a theory that millions of monkeys typing at random on millions of typewriters would reproduce the entire works of Shakespeare. The Internet has proven this theory to be untrue.&rdquo;
    </blockquote>
</section>

        

<!-- *************************** -->
<section>
  <p>
    Object-oriented programming is an exceptionally bad idea which could only have originated in California â€” Edsger W. Dijkstra
  </p>

  <aside class="notes">
  </aside>  
</section>

        
        
        
      </div>
  </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>
            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: false,
                history: true,
                center: true,
                width: 1600,
                height: 900,

                // Factor of the display size that should remain empty around the content
                margin: 0.05,
                slideNumber: true,
                //transition: 'slide', // none/fade/slide/convex/concave/zoom
                transition: 'none', 
                //transitionSpeed: "slow",

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    //{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    //{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad({languages: ["php"]}); },  },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });
            
            
            /* This draws the graph on the slide on a slidechanged event */
            Reveal.addEventListener('slidechanged', function(event) {
                var callback = "render_"+event.currentSlide.id;
                if(typeof(window[callback])=="function") {
                    window[callback]();
                }
            } );
            /* This draws the graph if we got here directly without coming from another slide */
            Reveal.addEventListener('ready', function(event) {
                var callback = "render_"+event.currentSlide.id;
                if(typeof(window[callback])=="function") {
                    window[callback]();
                }
            });

var createFunc = function() {
  var counter = 0;
  var themeCounter = 0;
    return function(e) {
      
      
      var themeCSSList = [
        "css/theme/whiteDanack.css",
        "css/theme/beige.css",
        "css/theme/black.css",
        "css/theme/blood.css",
        "css/theme/league.css",
        "css/theme/moon.css",
        "css/theme/night.css",
        "css/theme/serif.css",
        "css/theme/simple.css",
        "css/theme/sky.css",
        "css/theme/solarized.css",
      ];
      
      var codeCSSList = [
        "lib/css/zenburn_backup.css",
        "lib/css/vsdanack.css",
      ];
      
      if(e.which == 67 || e.which == 99) { //'c'
        counter = (counter + 1);// % 1;

        var codestyle = codeCSSList[counter % codeCSSList.length];
        $("#codeststylecss").attr('href', codestyle);
        $("#debug").text(codestyle);
      }
    };
};

          $(window).keypress(createFunc());
        </script>
    </body>
</html>
